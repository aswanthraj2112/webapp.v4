# Video Transcoding Application - Architecture Diagram (Text Format)

## Network Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   INTERNET                                           â”‚
â”‚                          (Global Users - Australia & Worldwide)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTPS                    â”‚ HTTPS/DNS
                             â”‚                          â”‚
                             â–¼                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     CloudFront CDN       â”‚   â”‚      Route53 DNS         â”‚
              â”‚   (Edge Distribution)    â”‚   â”‚   (Domain Resolution)    â”‚
              â”‚  Distribution: E3MBOUQ   â”‚   â”‚  Domain: cab432.com      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Origin Fetch                   â”‚ A Record
                           â”‚                                â”‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”‚                            AWS CLOUD (ap-southeast-2)                               â”‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚                         PUBLIC SUBNET (Internet Gateway)                      â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   â”‚  S3 Bucket     â”‚              â”‚  Application Load Balancer (ALB)    â”‚    â”‚
â”‚  â”‚   â”‚  (Static Web)  â”‚              â”‚  HTTPS:443 (SSL Termination)       â”‚    â”‚
â”‚  â”‚   â”‚                â”‚              â”‚  DNS: n11817143-app-alb-*.com      â”‚    â”‚
â”‚  â”‚   â”‚  React SPA     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                     â”‚    â”‚
â”‚  â”‚   â”‚  HTML/CSS/JS   â”‚  OAC Access  â”‚  Routing Rules:                    â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â€¢ /api/admin/* â†’ Admin Service     â”‚    â”‚
â”‚  â”‚                                    â”‚  â€¢ /api/*       â†’ Video API         â”‚    â”‚
â”‚  â”‚                                    â”‚                                     â”‚    â”‚
â”‚  â”‚                                    â”‚  Health Checks: /healthz (3 checks) â”‚    â”‚
â”‚  â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚ HTTP:8080
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚                    PRIVATE SUBNET - ECS FARGATE CLUSTER                      â”‚
â”‚  â”‚                         (n11817143-app-cluster)                              â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   â”‚   Video API     â”‚    â”‚  Admin Service   â”‚    â”‚  Transcode Worker  â”‚    â”‚
â”‚  â”‚   â”‚   Service       â”‚    â”‚                  â”‚    â”‚                    â”‚    â”‚
â”‚  â”‚   â”‚                 â”‚    â”‚                  â”‚    â”‚                    â”‚    â”‚
â”‚  â”‚   â”‚  Tasks: 2-5     â”‚    â”‚  Tasks: 1-3      â”‚    â”‚  Tasks: 0-10       â”‚    â”‚
â”‚  â”‚   â”‚  vCPU: 0.5      â”‚    â”‚  vCPU: 0.25      â”‚    â”‚  vCPU: 1.0         â”‚    â”‚
â”‚  â”‚   â”‚  RAM: 1GB       â”‚    â”‚  RAM: 512MB      â”‚    â”‚  RAM: 2GB          â”‚    â”‚
â”‚  â”‚   â”‚  Port: 8080     â”‚    â”‚  Port: 8080      â”‚    â”‚  (No ALB)          â”‚    â”‚
â”‚  â”‚   â”‚                 â”‚    â”‚                  â”‚    â”‚  Scale-to-Zero âœ“   â”‚    â”‚
â”‚  â”‚   â”‚  â€¢ Auth (JWT)   â”‚    â”‚  â€¢ User Mgmt     â”‚    â”‚  â€¢ FFmpeg          â”‚    â”‚
â”‚  â”‚   â”‚  â€¢ Metadata     â”‚    â”‚  â€¢ Statistics    â”‚    â”‚  â€¢ Video Transcode â”‚    â”‚
â”‚  â”‚   â”‚  â€¢ Presigned S3 â”‚    â”‚  â€¢ Dashboard     â”‚    â”‚  â€¢ SQS Polling     â”‚    â”‚
â”‚  â”‚   â”‚  â€¢ Submit Jobs  â”‚    â”‚  â€¢ Admin Ops     â”‚    â”‚  â€¢ S3 Upload/DL    â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚           â”‚                      â”‚                        â”‚
â”‚           â”‚                      â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚        â”‚   PRIVATE SUBNET - DATA & MESSAGING LAYER    â”‚                  â”‚
â”‚  â”‚        â”‚                      â”‚                        â”‚                  â”‚
â”‚  â”‚        â–¼                      â–¼                        â–¼                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  â”‚  DynamoDB    â”‚   â”‚ ElastiCache  â”‚         â”‚   Amazon SQS     â”‚      â”‚
â”‚  â”‚  â”‚              â”‚   â”‚ (Memcached)  â”‚         â”‚                  â”‚      â”‚
â”‚  â”‚  â”‚  Table:      â”‚   â”‚              â”‚         â”‚  Main Queue:     â”‚      â”‚
â”‚  â”‚  â”‚  n11817143-  â”‚   â”‚  Endpoint:   â”‚         â”‚  n11817143-A3    â”‚      â”‚
â”‚  â”‚  â”‚  VideoApp    â”‚   â”‚  11211       â”‚         â”‚                  â”‚      â”‚
â”‚  â”‚  â”‚              â”‚   â”‚  TTL: 300s   â”‚         â”‚  â€¢ Visibility:   â”‚      â”‚
â”‚  â”‚  â”‚  Keys:       â”‚   â”‚              â”‚         â”‚    600s          â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ USER#id   â”‚   â”‚  Cache:      â”‚         â”‚  â€¢ Long Poll:    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ VIDEO#id  â”‚   â”‚  â€¢ Metadata  â”‚         â”‚    20s           â”‚      â”‚
â”‚  â”‚  â”‚              â”‚   â”‚  â€¢ Hit: 80%  â”‚         â”‚                  â”‚      â”‚
â”‚  â”‚  â”‚  Data:       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  DLQ:            â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Video     â”‚            â–²               â”‚  n11817143-A3-dlqâ”‚      â”‚
â”‚  â”‚  â”‚    metadata  â”‚            â”‚               â”‚  â€¢ 14d retention â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ User info â”‚            â”‚ Cache         â”‚  â€¢ 3 max retries â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Status    â”‚            â”‚ Miss          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                        â”‚                â”‚
â”‚  â”‚         â”‚                    â”‚                        â”‚ Poll Jobs      â”‚
â”‚  â”‚         â”‚ Read/Write         â”‚                        â”‚ (Worker)       â”‚
â”‚  â”‚         â”‚                    â”‚                        â”‚                â”‚
â”‚  â”‚         â–¼                    â–¼                        â–¼                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â”‚                    Amazon S3 Video Storage                    â”‚    â”‚
â”‚  â”‚  â”‚                 Bucket: n11817143-a2                          â”‚    â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â”‚  Structure:                                                   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ raw/                   (Raw uploaded videos)               â”‚    â”‚
â”‚  â”‚  â”‚    â””â”€ {userId}/{videoId}.{ext}                               â”‚    â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ transcoded/            (Converted videos)                 â”‚    â”‚
â”‚  â”‚  â”‚    â”œâ”€ 720p/{userId}/{videoId}_720p.mp4                       â”‚    â”‚
â”‚  â”‚  â”‚    â””â”€ 1080p/{userId}/{videoId}_1080p.mp4                     â”‚    â”‚
â”‚  â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  â”‚  Features: Versioning âœ“, Encryption (SSE-S3) âœ“              â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚                          â”‚ S3 Event (ObjectCreated:raw/*)            â”‚
â”‚  â”‚                          â”‚                                            â”‚
â”‚  â”‚                          â–¼                                            â”‚
â”‚  â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚                  â”‚  Lambda Function â”‚                                â”‚
â”‚  â”‚                  â”‚  (S3â†’SQS Bridge) â”‚                                â”‚
â”‚  â”‚                  â”‚                  â”‚                                â”‚
â”‚  â”‚                  â”‚  Runtime:        â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ Container     â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ Node.js 18    â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ 256MB RAM     â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ 30s timeout   â”‚                                â”‚
â”‚  â”‚                  â”‚                  â”‚                                â”‚
â”‚  â”‚                  â”‚  Actions:        â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ Validate ext  â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ Extract meta  â”‚                                â”‚
â”‚  â”‚                  â”‚  â€¢ Send to SQS   â”‚                                â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚  â”‚                           â”‚ SendMessage                               â”‚
â”‚  â”‚                           â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚              AWS MANAGED SERVICES LAYER                            â”‚
â”‚  â”‚                            â”‚                                        â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   â”‚   Cognito    â”‚   â”‚  Parameter    â”‚   â”‚    CloudWatch      â”‚  â”‚
â”‚  â”‚   â”‚  User Pool   â”‚   â”‚     Store     â”‚   â”‚                    â”‚  â”‚
â”‚  â”‚   â”‚              â”‚   â”‚               â”‚   â”‚  Logs:             â”‚  â”‚
â”‚  â”‚   â”‚  ap-south-2  â”‚   â”‚  Secrets:     â”‚   â”‚  â€¢ /ecs/n11817143  â”‚  â”‚
â”‚  â”‚   â”‚  _CdVnmKfW   â”‚   â”‚  â€¢ JWT Keys   â”‚   â”‚  â€¢ 7d retention    â”‚  â”‚
â”‚  â”‚   â”‚              â”‚   â”‚  â€¢ API Keys   â”‚   â”‚                    â”‚  â”‚
â”‚  â”‚   â”‚  Auth:       â”‚   â”‚  â€¢ Encrypted  â”‚   â”‚  Metrics:          â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ Sign Up   â”‚   â”‚    (KMS)      â”‚   â”‚  â€¢ CPU/Memory      â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ Sign In   â”‚   â”‚               â”‚   â”‚  â€¢ Queue Depth     â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ JWT Gen   â”‚   â”‚  Access:      â”‚   â”‚  â€¢ Cache Hits      â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ MFA Ready â”‚   â”‚  â€¢ Task Role  â”‚   â”‚                    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    Based      â”‚   â”‚  Alarms:           â”‚  â”‚
â”‚  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â€¢ DLQ Messages    â”‚  â”‚
â”‚  â”‚                                          â”‚  â€¢ High CPU        â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â€¢ Unhealthy Tgt   â”‚  â”‚
â”‚  â”‚   â”‚   ECR (Container Registry)       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚   â”‚                                  â”‚                          â”‚
â”‚  â”‚   â”‚  Repositories:                   â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ video-api                     â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ admin-service                 â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ transcode-worker              â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ s3-to-sqs-lambda              â”‚                          â”‚
â”‚  â”‚   â”‚                                  â”‚                          â”‚
â”‚  â”‚   â”‚  Features:                       â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ Image Scanning âœ“              â”‚                          â”‚
â”‚  â”‚   â”‚  â€¢ Lifecycle Policy (10 images)  â”‚                          â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              LEGEND / KEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Connection Types:
  â”€â”€â–º   Synchronous HTTP/HTTPS Request
  â•â•â•â–º  Asynchronous Event / Message Queue
  Â·Â·Â·â–º  Configuration / Authentication
  â—„â”€â”€â–º  Bidirectional Communication

Network Zones:
  ğŸŒ  PUBLIC SUBNET     - Internet-accessible (ALB, S3 Static)
  ğŸ”’  PRIVATE SUBNET    - Internal only (ECS, DynamoDB, SQS, S3 Videos)
  â˜ï¸   MANAGED SERVICES - AWS-managed (Cognito, CloudWatch, ECR)

Scaling Indicators:
  â†•ï¸  Auto-scaling enabled (CPU/Memory based)
  ğŸ”½  Scale-to-zero capable (Queue depth based)
  
Security:
  ğŸ”  Encryption at rest
  ğŸ”’  Encryption in transit (TLS/SSL)
  ğŸ”‘  IAM Role-based access

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           DATA FLOW PATHS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Path 1: User Access Frontend (Static Content)
  User â†’ CloudFront â†’ S3 Static Website â†’ React App â†’ User

Path 2: API Request (Video Operations)
  User â†’ Route53 â†’ ALB â†’ Video API (ECS) â†’ DynamoDB/S3 â†’ Response

Path 3: Admin Operations
  User â†’ Route53 â†’ ALB â†’ Admin Service (ECS) â†’ Cognito/DynamoDB â†’ Response

Path 4: Video Upload & Transcode Job Creation
  User â†’ Video API â†’ S3 (raw/) â†’ Lambda â†’ SQS Queue

Path 5: Video Transcoding (Async)
  SQS Queue â†’ Transcode Worker (ECS) â†’ S3 (download raw) 
  â†’ FFmpeg Processing â†’ S3 (upload transcoded/) â†’ Update DynamoDB

Path 6: Caching Flow
  Video API â†’ ElastiCache (check) â†’ Cache Hit? Yes: Return
                                  â†’ Cache Miss? â†’ DynamoDB â†’ Cache Update

Path 7: Authentication
  User â†’ Video API â†’ Cognito (JWT Validation) â†’ Allow/Deny

Path 8: Error Handling
  SQS Main Queue â†’ Failed (3x) â†’ SQS DLQ â†’ CloudWatch Alarm â†’ Admin Alert

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        KEY ARCHITECTURAL DECISIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Microservices Separation
   â€¢ Video API: Public-facing, lightweight (0.5 vCPU)
   â€¢ Admin Service: Isolated admin ops (0.25 vCPU)
   â€¢ Transcode Worker: CPU-intensive, scales independently (1 vCPU)

2. Communication Patterns
   â€¢ Synchronous: ALB â†’ ECS (HTTP REST APIs)
   â€¢ Asynchronous: S3 â†’ Lambda â†’ SQS â†’ Worker (Event-driven)
   â€¢ Caching: ElastiCache â†’ 80% reduction in DB reads

3. Scaling Strategy
   â€¢ Video API: 2-5 tasks (CPU/Memory target tracking)
   â€¢ Admin Service: 1-3 tasks (CPU/Memory target tracking)
   â€¢ Worker: 0-10 tasks (SQS queue depth + scale-to-zero)

4. Security Layers
   â€¢ CloudFront: DDoS protection, edge caching
   â€¢ ALB: SSL termination, path-based routing, health checks
   â€¢ Security Groups: Network-level firewall
   â€¢ IAM Roles: Resource-level permissions
   â€¢ Cognito: User authentication + JWT tokens

5. Cost Optimization
   â€¢ Scale-to-zero for workers: Saves ~$1,315/month
   â€¢ Lambda for events: $0.00 (free tier) vs. $45/month ECS
   â€¢ ElastiCache: Reduces DynamoDB reads (cost + latency)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
